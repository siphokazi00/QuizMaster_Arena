{% extends 'quiz/base.html' %}
{% load static %}

{% block content %}
    <div class="quiz-container">
	    <h2>QuizMaster Arena</h2>
	    <div id="questions"></div>
	    <button onclick="fetchQuiz()">Start Quiz</button>
    </div>

    <script>
	    async function fetchQuiz() {
		    try {
			    const response = await fetch('/api/fetch-questions/');
			    const questions = await response.json();
			    displayQuestions(questions);
		    } catch (error) {
			    document.getElementById('questions').innerText = "Error loading quiz questions.";
		    }
	    }

	    function displayQuestions(questions) {
		    const questionsContainer = document.getElementById('questions');
		    questionsContainer.innerHTML = ''; // Clear previous questions

		    questions.forEach((question, index) => {
			    const questionDiv = document.createElement('div');
			    questionDiv.innerHTML = `
			    <h3>Question ${index + 1}: ${question.question}</h3>
			    ${question.answers.map((answer, i) => `
			    <button onclick="checkAnswer(${i}, ${question.correct_answer})">${answer}</button>
			    `).join('')}
			    `;
			    questionsContainer.appendChild(questionDiv);
		    });
	    }

	    function checkAnswer(selectedAnswer, correctAnswer) {
		    if (selectedAnswer === correctAnswer) {
			    alert("Correct!");
		    } else {
			    alert("Wrong answer!");
		    }
	    }
    </script>
{% endblock %}
